title: 'windows上でhubotを実行するとERROR Error: EINVAL, read'
id: 59
categories:
  - Memo
date: 2015-01-14 16:08:09
tags:
---
最近、と言っても今日なんですが、Slackにhubotを導入して遊んでいましてWindows環境でテストしていたらエラーが出たので困ってます。

<!--more-->

#### 環境

*   Windows8.1 64bit
*   node.js 0.10.33
*   npm 1.4.28
*   hubot 2.11.0

#### 状況

hubotのプロジェクトがあるフォルダで`$ bin/hubot`を実行するとhubotが実行されると思うのですが、適当にコマンド打った後一旦終了し、2回目以降起動しようとすると、`ERROR Error: EINVAL, read`というようなエラーが出ます。

これは同フォルダに生成される.hubot_historyというファイルが原因なようで、コマンドを実行した後書き込まれるようになっています。ですが、2回目以降どうも読み込みに失敗しているようで起動しようとしても詰まってしまいます。

#### 対処方法...？

.hubot_historyを消すことによって一時的に実行できるようになります。が、実行後終了するとまた生成されてしまうため根本的な解決にはなっていません。

こういうのはWindows特有な気がしますね。Linux環境上で実行するのが無難かもしれません。